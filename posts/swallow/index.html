<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Bourbon ">
<meta name="description" content="This post showcases a window swallowing solution that works universally." />
<meta name="keywords" content=", linux, bspwm" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="localhost/posts/swallow/" />


    <title>
        
            Swallow :: Bourbon&#39;s Blog 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/localhost/main.4e5c639214707eff609bb55fe49e183dee42258a73bc90e4cc7b0a84f900798a.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/localhost/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/localhost/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/localhost/favicon-16x16.png">
    <link rel="manifest" href="/localhost/site.webmanifest">
    <link rel="mask-icon" href="/localhost/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/localhost/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Swallow">
<meta itemprop="description" content="This post showcases a window swallowing solution that works universally."><meta itemprop="datePublished" content="2022-01-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-01-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="440"><meta itemprop="image" content="localhost"/>
<meta itemprop="keywords" content="linux,bspwm," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="localhost"/>

<meta name="twitter:title" content="Swallow"/>
<meta name="twitter:description" content="This post showcases a window swallowing solution that works universally."/>




    <meta property="og:title" content="Swallow" />
<meta property="og:description" content="This post showcases a window swallowing solution that works universally." />
<meta property="og:type" content="article" />
<meta property="og:url" content="localhost/posts/swallow/" /><meta property="og:image" content="localhost"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-13T00:00:00+00:00" /><meta property="og:site_name" content="Bourbon&#39;s Blog" />







    <meta property="article:published_time" content="2022-01-13 00:00:00 &#43;0000 UTC" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">/home</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#8E3200;
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/localhost/about">About</a></li><li><a href="/localhost/posts">Posts</a></li><li><a href="/localhost/setup">Setup</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        3 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="localhost/posts/swallow/">Swallow</a>
      </h1>

      
        <div class="post-excerpt">This post showcases a window swallowing solution that works universally.</div>
      

      

      

      <div class="post-content">
        <p>Throughout the discussion, <code>C-x</code> means Control + x keychord.</p>
<h1 id="introduction">Introduction</h1>
<p>Window swallowing is a mechanism in tiling window managers, by which a GUI application&rsquo;s window can replace the terminal window in-place, when the application is called from the terminal.</p>
<p>This avoids congestion in tiling WMs, and is a much preferred solution than zooming into the said GUI window (Also called <em>monocle mode</em> in some WMs)</p>
<p>For instance, consider a scenario where I want to spawn VLC from my terminal. After I call VLC with <code>vlc ./video.mp4</code>, I get a VLC window on my screen. But now, there&rsquo;s a leftover terminal window that does nothing, and you can&rsquo;t close it because it&rsquo;s the parent window of VLC.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>The following diagram illustrates the difference without and with swallowing, respectively:
<img src="/swallow.png" alt="Swallow_VLC"></p>
<p>Popular WMs such as DWM, BSPWM and i3 have patches available for swallowing a window. However, I prefer a native solution over patches. As a bonus, the solution that I was able to come up with is also universal.</p>
<h1 id="my-solution">My solution</h1>
<p>My solution, whether if inefficient or dumb, most importantly works and has never failed me.</p>
<p>I combine a BASH script + a Fish shell function (alias) + a Fish shell keyboard shortcut that swallows a window. Code explained below. Please don&rsquo;t mind the names.</p>
<h2 id="bash-script-rbgsh">Bash script: <code>rbg.sh</code></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>$@ &amp;
</span></span><span style="display:flex;"><span>disown
</span></span></code></pre></div><p>This is just doing automatically the stuff that would require manual efforts. The first line takes in the entire <code>argv</code>, symbolized with <code>@</code> variable, puts it in background with <code>&amp;</code> and disowns it.</p>
<p>The script is meant to be placed in one of the directories in your <code>$PATH</code>.</p>
<h2 id="fish-function-sdffish">Fish function: <code>sdf.fish</code></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> sdf
</span></span><span style="display:flex;"><span>  rbg $argv <span style="color:#f92672">&amp;&amp;</span> exit
</span></span><span style="display:flex;"><span>end
</span></span></code></pre></div><p>Which calls the <code>rbg</code> binary with your command.</p>
<p>This function allows us to wrap over the <code>rbg.sh</code> script as well as close the actual terminal window. This only exists because I couldn&rsquo;t find a way to both exit the BASH script and close the terminal window without messing with Xorg tools.</p>
<h2 id="fish-shortcut-goes-in-configfish">Fish shortcut: goes in <code>config.fish</code></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bind <span style="color:#ae81ff">\c</span>s <span style="color:#e6db74">&#39;fish_commandline_prepend sdf&#39;</span>
</span></span></code></pre></div><p>Which just prepends <code>sdf</code> to your command in the terminal. Note that typing <code>sdf &lt;command&gt;</code> is kind of awkward and feels unnatural (I always forget to do it), so typing the command first and prepending is the most natural flow.</p>
<h1 id="results">Results</h1>
<p>Now, when I type <code>vlc ./video.mp4</code> and press <code>C-s</code> the resulting command becomes <code>sdf vlc ./video.mp4</code>, which successfully swallows the terminal when executed. It&rsquo;s instantaneous with really no lag.</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>You can close the window by putting the process to background, disowning it and then closing the terminal. The problem with this approach is that it is slow and just doesn&rsquo;t feel right.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="localhost/tags/linux/">linux</a></span>
        <span class="tag"><a href="localhost/tags/bspwm/">bspwm</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        440 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2022-01-13 05:30
        

         
          
        
      </p>
    </div>

    

    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2022</span>
            <span><a href="localhost">Bourbon</a></span>
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span><a href="localhost/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            
        </div>
    </div>
    
    
</footer>


<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
           extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
  </script>

            
        </div>

        



<script type="text/javascript" src="/localhost/bundle.min.a2c5b062c87998f04d1b5dfb6a89a1b2d79786c21d0cb63a05e8a2082984b64b77d80955e3b97eab17273775162ba372511b711fea2f7608f216e68a67bb22d6.js" integrity="sha512-osWwYsh5mPBNG137aomhsteXhsIdDLY6BeiiCCmEtkt32AlV47l&#43;qxcnN3UWK6NyURtxH&#43;ovdgjyFuaKZ7si1g=="></script>



    </body>
</html>
